(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{177:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h2",{attrs:{id:"mongodb-https-www-runoob-com-mongodb-mongodb-tutorial-html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-https-www-runoob-com-mongodb-mongodb-tutorial-html","aria-hidden":"true"}},[t._v("#")]),t._v(" MongoDB(https://www.runoob.com/mongodb/mongodb-tutorial.html)")]),t._v(" "),a("h2",{attrs:{id:"安装mongodb（c盘）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mongodb（c盘）","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装mongodb（C盘）")]),t._v(" "),a("ul",[a("li",[t._v("配置环境变量"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("C:\\mongo\\bin\n")])])])]),t._v(" "),a("li",[t._v("新建mongo 文件夹")]),t._v(" "),a("li",[t._v("mongo下创建mongod.cfg文件配置：如下"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemLog:\n\tdestination: file\n\tpath: c:\\data\\log\\mongod.log\nstorage:\n\tdbPath: c:\\data\\db\n\t\n")])])])]),t._v(" "),a("li",[t._v("新建data 文件夹")]),t._v(" "),a("li",[t._v("在data下创建db和log文件夹")]),t._v(" "),a("li",[t._v("以管理员的身份打开命令行窗口"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('C:\\mongo\\bin\\mongod.exe --config "C:\\mongo\\mongod.cfg" --install\n\t\n')])])])]),t._v(" "),a("li",[t._v("启动mongodb服务"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("net start MongoDB\n\n")])])])]),t._v(" "),a("li",[t._v("关闭mongodb服务"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("net stop MongoDB\n")])])])]),t._v(" "),a("li",[t._v("移除mongodb服务"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("C:\\mongo\\bin\\mongod.exe --remove\n\n")])])])]),t._v(" "),a("li",[t._v("如果启动失败，证明上边的操作有误在控制台输入"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("   sc delete MongoDB\n")])])]),t._v("删除之前配置的服务然后再来一次")])]),t._v(" "),a("h2",{attrs:{id:"mongodb-设置账号和密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-设置账号和密码","aria-hidden":"true"}},[t._v("#")]),t._v(" MongoDB 设置账号和密码")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("启用认证 mongod --auth")])]),t._v(" "),a("li",[a("p",[t._v("创建管理员用户")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('use admin\ndb.createUser({user:"admin",pwd:"password",roles:["root"]})\n')])])])]),t._v(" "),a("li",[a("p",[t._v("认证登录")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.auth("admin","password")\n')])])])]),t._v(" "),a("li",[a("p",[t._v("显示当前系统用户")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.system.users.find()\n")])])])]),t._v(" "),a("li",[a("p",[t._v("删除用户")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('use admin\ndb.dropUser("xx") true\n')])])])])]),t._v(" "),a("h2",{attrs:{id:"基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本概念","aria-hidden":"true"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),a("ul",[a("li",[t._v("数据库（database）")]),t._v(" "),a("li",[t._v("集合（collection）")]),t._v(" "),a("li",[t._v("文档（document）")]),t._v(" "),a("li",[t._v("在MongoDB中，数据库和集合都不需要手动创建，当我们创建文档时，如果文档所在的集合或数据库不存在会自动创建数据库和集合")])]),t._v(" "),a("h2",{attrs:{id:"基本指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本指令","aria-hidden":"true"}},[t._v("#")]),t._v(" 基本指令")]),t._v(" "),a("h3",{attrs:{id:"显示当前的所有数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示当前的所有数据库","aria-hidden":"true"}},[t._v("#")]),t._v(" 显示当前的所有数据库")]),t._v(" "),a("pre",[a("code",[t._v("- show dbs\n- show databases\n")])]),t._v(" "),a("h3",{attrs:{id:"进入到指定的数据库中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入到指定的数据库中","aria-hidden":"true"}},[t._v("#")]),t._v(" 进入到指定的数据库中")]),t._v(" "),a("pre",[a("code",[t._v("- use <db>  db为指定数据库\n- db 当前所处的数据库\n- show collections 显示数据库中所有的集合\n")])]),t._v(" "),a("h3",{attrs:{id:"集合的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集合的操作","aria-hidden":"true"}},[t._v("#")]),t._v(" 集合的操作")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("创建集合(当你插入一些文档时，MongoDB 会自动创建集合)")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.createCollection(name, options)\n例子：\ndb.createCollection("mycol", { capped : true, autoIndexId : true, size : 6142800, max : 10000 } )\n')])])]),a("pre",[a("code",[t._v("  参数说明：\n  - name: 要创建的集合名称\n  - options: 可选参数, 指定有关内存大小及索引的选项  可以是如下参数：\n")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("capped")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("（可选）如果为 true，则创建固定集合。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档。当该值为 true 时，必须指定 size 参数。")])]),t._v(" "),a("tr",[a("td",[t._v("autoIndexId")]),t._v(" "),a("td",[t._v("布尔")]),t._v(" "),a("td",[t._v("（可选）如为 true，自动在 _id 字段创建索引。默认为 false。")])]),t._v(" "),a("tr",[a("td",[t._v("size")]),t._v(" "),a("td",[t._v("数值")]),t._v(" "),a("td",[t._v("（可选）为固定集合指定一个最大值，以千字节计（KB）。如果 capped 为 true，也需要指定该字段。")])]),t._v(" "),a("tr",[a("td",[t._v("max")]),t._v(" "),a("td",[t._v("数值")]),t._v(" "),a("td",[t._v("（可选）指定固定集合中包含文档的最大数量。")])])])]),t._v(" "),a("p",[t._v("在插入文档时，MongoDB 首先检查固定集合的 size 字段，然后检查 max 字段。")])]),t._v(" "),a("li",[a("p",[t._v("删除集合\n"),a("code",[t._v("db.collection.drop()")])])])]),t._v(" "),a("h3",{attrs:{id:"crud（增删改查）的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#crud（增删改查）的操作","aria-hidden":"true"}},[t._v("#")]),t._v(" CRUD（增删改查）的操作")]),t._v(" "),a("h4",{attrs:{id:"插入文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插入文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 插入文档")]),t._v(" "),a("ul",[a("li",[t._v("db.COLLECTION_NAME.insert() 插入文档"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.test.insert({name: "a1"})\ndb.test.insert([{name: "a1"},{name: "a2"}])\n')])])])]),t._v(" "),a("li",[t._v("db.collection.insertOne():向指定集合中插入一条文档数据"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.test.insertOne({name: "a1"})\n')])])])]),t._v(" "),a("li",[t._v("db.collection.insertMany():向指定集合中插入多条文档数据"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.test.insertOne([{name: "a1"},{name: "a2"}])\n')])])])])]),t._v(" "),a("p",[t._v("插入文档你也可以使用 db.col.save(document) 命令。如果不指定 _id 字段 save() 方法类似于 insert() 方法。如果指定 _id 字段，则会更新该 _id 的数据。")]),t._v(" "),a("h4",{attrs:{id:"删除文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 删除文档")]),t._v(" "),a("ul",[a("li",[t._v("remove()"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.collection.remove(\n   <query>,\n   {\n     justOne: <boolean>,\n     writeConcern: <document>\n   }\n)\n")])])]),a("ul",[a("li",[t._v("query :（可选）删除的文档的条件。")]),t._v(" "),a("li",[t._v("justOne : （可选）如果设为 true 或 1，则只删除一个文档，如果不设置该参数，或使用默认值 false，则删除所有匹配条件的文档。")]),t._v(" "),a("li",[t._v("writeConcern :（可选）抛出异常的级别。")])])]),t._v(" "),a("li",[t._v("deleteMany() 删除多个")]),t._v(" "),a("li",[t._v("deleteOne() 删除单个")]),t._v(" "),a("li",[t._v("如删除集合下全部文档："),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.inventory.deleteMany({})\n")])])])]),t._v(" "),a("li",[t._v("删除 status 等于 A 的全部文档："),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.inventory.deleteMany({ status : "A" })\n')])])])]),t._v(" "),a("li",[t._v("删除 status 等于 A 的一个文档："),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.inventory.deleteOne( { status: "A" } )\n')])])])])]),t._v(" "),a("h4",{attrs:{id:"更新文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 更新文档")]),t._v(" "),a("ul",[a("li",[t._v("update() 方法用于"),a("strong",[t._v("更新已存在的文档")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.collection.update(\n   <query>,\n   <update>,\n   {\n     upsert: <boolean>,\n     multi: <boolean>,\n     writeConcern: <document>\n   }\n   \n  db.col.update(\n  {description:""},\n  {$set:{name:666}},\n  {multi:true}\n  )\n)\n')])])]),a("ul",[a("li",[t._v("query : update的查询条件，类似sql update查询内where后面的。")]),t._v(" "),a("li",[t._v("update : update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查询内set后面的")]),t._v(" "),a("li",[t._v("upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。")]),t._v(" "),a("li",[t._v("multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。")]),t._v(" "),a("li",[t._v("writeConcern :可选，抛出异常的级别。")])])]),t._v(" "),a("li",[t._v("save() 方法通过传入的文档来"),a("strong",[t._v("替换已有文档")]),t._v(" （根据_id来覆盖相同的数据）"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.collection.save(\n   <document>,\n   {\n     writeConcern: <document>\n   }\n)\n")])])]),a("ul",[a("li",[t._v("document : 文档数据。")]),t._v(" "),a("li",[t._v("writeConcern :可选，抛出异常的级别。")])])]),t._v(" "),a("li",[t._v("更多实例"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('只更新第一条记录：\n\ndb.col.update( { "count" : { $gt : 1 } } , { $set : { "test2" : "OK"} } );\n全部更新：\n\ndb.col.update( { "count" : { $gt : 3 } } , { $set : { "test2" : "OK"} },false,true );\n只添加第一条：\n\ndb.col.update( { "count" : { $gt : 4 } } , { $set : { "test5" : "OK"} },true,false );\n全部添加进去:\n\ndb.col.update( { "count" : { $gt : 5 } } , { $set : { "test5" : "OK"} },true,true );\n全部更新：\n\ndb.col.update( { "count" : { $gt : 15 } } , { $inc : { "count" : 1} },false,true );\n只更新第一条记录：\n\ndb.col.update( { "count" : { $gt : 10 } } , { $inc : { "count" : 1} },false,false );\n')])])])])]),t._v(" "),a("h4",{attrs:{id:"查找文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查找文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 查找文档")]),t._v(" "),a("ul",[a("li",[t._v("查询数据的语法格式如下"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('db.collection.find(query, projection)\ndb.col.find().pretty()\ndb.col.find({num:{$lt:666},title:"1232312"},{_id:0,title:1}).pretty()//只取title字段\n')])])]),a("ul",[a("li",[t._v("query ：可选，使用查询操作符指定查询条件")]),t._v(" "),a("li",[t._v("projection ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。")])])]),t._v(" "),a("li",[t._v("MongoDB 与 RDBMS Where 语句比较\n"),a("table",[a("thead",[a("tr",[a("th",[t._v("操作")]),t._v(" "),a("th",[t._v("格式")]),t._v(" "),a("th",[t._v("范例")]),t._v(" "),a("th",[t._v("RDBMS中的类似语句")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("等于")]),t._v(" "),a("td",[t._v("{key:value}")]),t._v(" "),a("td",[t._v('db.col.find({"by":"菜鸟教程"}).pretty()')]),t._v(" "),a("td",[t._v("where by = '菜鸟教程'")])]),t._v(" "),a("tr",[a("td",[t._v("小于")]),t._v(" "),a("td",[t._v("{key:{$lt:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"num":{$lt:50}}).pretty()')]),t._v(" "),a("td",[t._v("where num < 50")])]),t._v(" "),a("tr",[a("td",[t._v("小于或等于")]),t._v(" "),a("td",[t._v("{key:{$lte:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"num":{$lte:50}}).pretty()')]),t._v(" "),a("td",[t._v("where num <= 50")])]),t._v(" "),a("tr",[a("td",[t._v("大于")]),t._v(" "),a("td",[t._v("{key:{$gt:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"num":{$gt:50}}).pretty()')]),t._v(" "),a("td",[t._v("where num > 50")])]),t._v(" "),a("tr",[a("td",[t._v("大于或等于")]),t._v(" "),a("td",[t._v("{key:{$gte:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"num":{$gte:50}}).pretty()')]),t._v(" "),a("td",[t._v("where num >= 50")])]),t._v(" "),a("tr",[a("td",[t._v("不等于")]),t._v(" "),a("td",[t._v("{key:{$ne:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"num":{$ne:50}}).pretty()')]),t._v(" "),a("td",[t._v("where num != 50")])]),t._v(" "),a("tr",[a("td",[t._v("大于和小于")]),t._v(" "),a("td",[t._v("{key:{$ne:value}}")]),t._v(" "),a("td",[t._v("db.col.find( {  num: { $gt: 50 ,$lt: 80}} )")]),t._v(" "),a("td",[t._v("where num BETWEEN 50 AND 80")])])])])]),t._v(" "),a("li",[t._v("MongoDB AND 条件"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.col.find({key1:value1, key2:value2}).pretty()\n")])])])]),t._v(" "),a("li",[t._v("MongoDB OR 条件"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db.col.find(\n   {\n      $or: [\n         {key1: value1}, {key2:value2}\n      ]\n   }\n).pretty()\n")])])])])])])}],!1,null,null,null);e.default=n.exports}}]);